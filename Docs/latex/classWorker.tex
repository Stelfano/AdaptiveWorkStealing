\doxysection{Worker Class Reference}
\hypertarget{classWorker}{}\label{classWorker}\index{Worker@{Worker}}


{\ttfamily \#include $<$Worker\+Class.\+hpp$>$}

Inheritance diagram for Worker\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classWorker}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classWorker_af9db96163050bffa9276d0fd8ea94e96}{Worker}} (int \mbox{\hyperlink{classNode_af6f5d2b4b37ba297fa6eebc17542dad4}{parent\+Rank}}, int \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classNode_aec1b644887e939fba2f43ff628ecd7eb}{recv\+Buffer}}, int \mbox{\hyperlink{classNode_a57eaf1618c1bf6e9efdb1679c7c88f4b}{chunk\+Size}}, float \mbox{\hyperlink{classNode_a3152534caf4db66c422fccd375473e1e}{local\+Average}}, int threshold)
\begin{DoxyCompactList}\small\item\em Construct a new \doxylink{classWorker}{Worker} object Buffer vector is created and total particles is initialized with chunk size. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classWorker_ab7f43824224779cd85f23922caaa7589}{\texorpdfstring{$\sim$}{\string~}\+Worker}} ()
\begin{DoxyCompactList}\small\item\em Destroy the \doxylink{classWorker}{Worker} object In this function only particle buffer is destroyed. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classWorker_aaa59d1491ca8c965d44b66d074afc517}{local\+Reduction}} ()
\begin{DoxyCompactList}\small\item\em Local reduction function to simulate particles. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classNode}{Node}}}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classNode_a48511c73b8d4174af4405f14fc7bb37a}{send\+Status\+Function}} ()
\begin{DoxyCompactList}\small\item\em Update function for a node, this function is assigned to a thread to be able to update status when necessary. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classNode_a452fc104fe4726da9630696fe769832f}{recieve\+Message\+From\+Matchmaker}} ()
\begin{DoxyCompactList}\small\item\em Reciever function to obtain metric updates on average, threshold and recieve work stealing related messages. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classNode_a1dd944b4340f50721541e1e720f586cd}{Node}} (int \mbox{\hyperlink{classNode_af6f5d2b4b37ba297fa6eebc17542dad4}{parent\+Rank}}, int \mbox{\hyperlink{classNode_a57eaf1618c1bf6e9efdb1679c7c88f4b}{chunk\+Size}}, int \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classNode_aec1b644887e939fba2f43ff628ecd7eb}{recv\+Buffer}}, int \mbox{\hyperlink{classNode_a56e05c172ac32c53ce36483cb826fcf8}{total\+Particles}}, float \mbox{\hyperlink{classNode_a3152534caf4db66c422fccd375473e1e}{local\+Average}}, int \mbox{\hyperlink{classNode_a42508a8dadd837a7936ab40b4de38d53}{local\+Threshold}})
\begin{DoxyCompactList}\small\item\em Construct a new \doxylink{classNode}{Node} object. \end{DoxyCompactList}\item 
virtual \mbox{\hyperlink{classNode_af5e3fa79300bf5f3f2f3ecae6e795a94}{\texorpdfstring{$\sim$}{\string~}\+Node}} ()
\begin{DoxyCompactList}\small\item\em Destroy the \doxylink{classNode}{Node} object. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classWorker_a0785107f3e97d649cce7db04fc960868}{probability\+Increase\+Vector\+Size}} (int generated\+Number)
\begin{DoxyCompactList}\small\item\em Function used to reduce or expand vector particles. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classWorker_a94ff3c7b15e3b8d42f00f44783dfae34}{inject\+Data\+In\+Node}} (int stealing\+Quantity)
\begin{DoxyCompactList}\small\item\em Function that injects data in a worker node Injected particles from a matchmaker into a worker are integrated in the vector buffer here, UNLOCKED status is then sent upwards to signal termination of the injection, total particles and counter are also updated. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classWorker_aa15f15c920d95d0ff639cb875a146252}{delete\+Data\+From\+Node}} (int stealing\+Quantity)
\begin{DoxyCompactList}\small\item\em Function that deletes data in a worker node This function negotiates particles to be stolen with a matchmaker, after available particle number is sent reduction is stopped via mutex and particles are stolen by the matchmaker, those particles are the erased from particles buffer and UNLOCKED status is declared, local reduction is free to resume. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Member Functions inherited from \mbox{\hyperlink{classNode}{Node}}}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classNode_a3e8e2835b7f01ba3b44e57b181a175b8}{declare\+Status}} (int \mbox{\hyperlink{classNode_addabd01a35fcce9e4ced5fe9b6b6da82}{status}})
\begin{DoxyCompactList}\small\item\em Status declaration function, status is updated and then communicated to parent rank in the hierarchy. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
vector$<$ int $>$ \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classWorker_aa3d14370e3b0c1d2535eee6f79d6fbd3}{buffer}}
\begin{DoxyCompactList}\small\item\em Pointer to particle buffer instatiated as an object of class std\+::vector. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classWorker_ad9a19c5837563d12d4b3e5407d32984e}{counter}}
\begin{DoxyCompactList}\small\item\em Counter of workstealing events. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{classNode}{Node}}}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{classNode_a65784e8a8e4c895cae1c71b6886dee32}{tree\+Width}}
\begin{DoxyCompactList}\small\item\em Width of the computational tree. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{node\+Rank}}
\begin{DoxyCompactList}\small\item\em Rank of node. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classNode_af6f5d2b4b37ba297fa6eebc17542dad4}{parent\+Rank}}
\begin{DoxyCompactList}\small\item\em Rank of parent (if the current node is 0 parent rank is -\/1) \end{DoxyCompactList}\item 
int \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classNode_a0ec74d1471ab1093e62588cb919bf8ea}{in\+Window\+Buffer}}
\begin{DoxyCompactList}\small\item\em Pointer to input window buffer. \end{DoxyCompactList}\item 
int \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classNode_abe556d993e821e964d2158edda89683f}{out\+Window\+Buffer}}
\begin{DoxyCompactList}\small\item\em Pointer to output window buffer. \end{DoxyCompactList}\item 
int \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classNode_aec1b644887e939fba2f43ff628ecd7eb}{recv\+Buffer}}
\begin{DoxyCompactList}\small\item\em Pointer to initial recieve buffer. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classNode_a57eaf1618c1bf6e9efdb1679c7c88f4b}{chunk\+Size}}
\begin{DoxyCompactList}\small\item\em Number of particle sent in a single chunk. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classNode_addabd01a35fcce9e4ced5fe9b6b6da82}{status}}
\begin{DoxyCompactList}\small\item\em Status of node. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classNode_a56e05c172ac32c53ce36483cb826fcf8}{total\+Particles}}
\begin{DoxyCompactList}\small\item\em Total particle present in the node. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{classNode_a3152534caf4db66c422fccd375473e1e}{local\+Average}}
\begin{DoxyCompactList}\small\item\em Current average of node. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classNode_a42508a8dadd837a7936ab40b4de38d53}{local\+Threshold}}
\begin{DoxyCompactList}\small\item\em Current threshold of node. \end{DoxyCompactList}\item 
MPI\+\_\+\+Win \mbox{\hyperlink{classNode_adb103e96748537b115c18c2a2b27a9d9}{in\+Window}}
\begin{DoxyCompactList}\small\item\em MPI object to use RDMA for input window buffer. \end{DoxyCompactList}\item 
MPI\+\_\+\+Win \mbox{\hyperlink{classNode_a187219708add28a69d82fbe647aaf612}{out\+Window}}
\begin{DoxyCompactList}\small\item\em MPI object to use RDMA for output window buffer. \end{DoxyCompactList}\item 
atomic$<$ bool $>$ \mbox{\hyperlink{classNode_a95b7033e5e44fd68c8952a10af367d92}{done}}
\begin{DoxyCompactList}\small\item\em Atomic variable to signal termination. \end{DoxyCompactList}\item 
bool \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classNode_ab40c6d0e2e312c9f1b23b6d7878c6fbf}{sent\+Flag}}
\begin{DoxyCompactList}\small\item\em Use flag to send data upwards, prevents multiple update of the same status. \end{DoxyCompactList}\item 
shared\+\_\+mutex \mbox{\hyperlink{classNode_a3d817091a1acc63fea4c65352564a73d}{total\+Particle\+Mutex}}
\begin{DoxyCompactList}\small\item\em Shared mutex to prevent race condition on Total particles and Particle buffer(\+Only in worker) \end{DoxyCompactList}\item 
shared\+\_\+mutex \mbox{\hyperlink{classNode_afd3788a41ab04ded3a98566ea7f0081f}{sent\+Flag\+Mutex}}
\begin{DoxyCompactList}\small\item\em Shared mutex to prevent race condition on status update flag array. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classWorker_af9db96163050bffa9276d0fd8ea94e96}\label{classWorker_af9db96163050bffa9276d0fd8ea94e96} 
\index{Worker@{Worker}!Worker@{Worker}}
\index{Worker@{Worker}!Worker@{Worker}}
\doxysubsubsection{\texorpdfstring{Worker()}{Worker()}}
{\footnotesize\ttfamily Worker\+::\+Worker (\begin{DoxyParamCaption}\item[{int}]{parent\+Rank,  }\item[{int \texorpdfstring{$\ast$}{*}}]{recv\+Buffer,  }\item[{int}]{chunk\+Size,  }\item[{float}]{local\+Average,  }\item[{int}]{threshold }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Construct a new \doxylink{classWorker}{Worker} object Buffer vector is created and total particles is initialized with chunk size. 


\begin{DoxyParams}{Parameters}
{\em parent\+Rank} & \\
\hline
{\em recv\+Buffer} & \\
\hline
{\em chunk\+Size} & \\
\hline
{\em local\+Average} & \\
\hline
{\em threshold} & \\
\hline
\end{DoxyParams}
\Hypertarget{classWorker_ab7f43824224779cd85f23922caaa7589}\label{classWorker_ab7f43824224779cd85f23922caaa7589} 
\index{Worker@{Worker}!````~Worker@{\texorpdfstring{$\sim$}{\string~}Worker}}
\index{````~Worker@{\texorpdfstring{$\sim$}{\string~}Worker}!Worker@{Worker}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}Worker()}{\string~Worker()}}
{\footnotesize\ttfamily virtual Worker\+::\texorpdfstring{$\sim$}{\string~}\+Worker (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Destroy the \doxylink{classWorker}{Worker} object In this function only particle buffer is destroyed. 



\doxysubsection{Member Function Documentation}
\Hypertarget{classWorker_aa15f15c920d95d0ff639cb875a146252}\label{classWorker_aa15f15c920d95d0ff639cb875a146252} 
\index{Worker@{Worker}!deleteDataFromNode@{deleteDataFromNode}}
\index{deleteDataFromNode@{deleteDataFromNode}!Worker@{Worker}}
\doxysubsubsection{\texorpdfstring{deleteDataFromNode()}{deleteDataFromNode()}}
{\footnotesize\ttfamily void Worker\+::delete\+Data\+From\+Node (\begin{DoxyParamCaption}\item[{int}]{stealing\+Quantity }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Function that deletes data in a worker node This function negotiates particles to be stolen with a matchmaker, after available particle number is sent reduction is stopped via mutex and particles are stolen by the matchmaker, those particles are the erased from particles buffer and UNLOCKED status is declared, local reduction is free to resume. 


\begin{DoxyParams}{Parameters}
{\em stealing\+Quantity} & Quantity of particles to be stolen (this is not necessarily the actual number of particles available) \\
\hline
\end{DoxyParams}


Reimplemented from \mbox{\hyperlink{classNode_a7b77321aa26c41900b8d8056114461bf}{Node}}.

\Hypertarget{classWorker_a94ff3c7b15e3b8d42f00f44783dfae34}\label{classWorker_a94ff3c7b15e3b8d42f00f44783dfae34} 
\index{Worker@{Worker}!injectDataInNode@{injectDataInNode}}
\index{injectDataInNode@{injectDataInNode}!Worker@{Worker}}
\doxysubsubsection{\texorpdfstring{injectDataInNode()}{injectDataInNode()}}
{\footnotesize\ttfamily void Worker\+::inject\+Data\+In\+Node (\begin{DoxyParamCaption}\item[{int}]{stealing\+Quantity }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}



Function that injects data in a worker node Injected particles from a matchmaker into a worker are integrated in the vector buffer here, UNLOCKED status is then sent upwards to signal termination of the injection, total particles and counter are also updated. 


\begin{DoxyParams}{Parameters}
{\em stealing\+Quantity} & Quantity of particles to be injected \\
\hline
\end{DoxyParams}


Reimplemented from \mbox{\hyperlink{classNode_a98d4466b06851d7779677eeb6c7ec9dd}{Node}}.

\Hypertarget{classWorker_aaa59d1491ca8c965d44b66d074afc517}\label{classWorker_aaa59d1491ca8c965d44b66d074afc517} 
\index{Worker@{Worker}!localReduction@{localReduction}}
\index{localReduction@{localReduction}!Worker@{Worker}}
\doxysubsubsection{\texorpdfstring{localReduction()}{localReduction()}}
{\footnotesize\ttfamily int Worker\+::local\+Reduction (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Local reduction function to simulate particles. 

This function simulates particle activity by sum of integers, for every integer added to the total value a random number in an interval is taken from a uniform distribution to simulate new particle generation, to proc work stealing only some nodes may generate new particles, particles are constantly copied inside out\+Window\+Buffer to allow a matchmaker to recover those particles, when termination flag is active (all workers have to be idle for this to happen) reduction ends and status\+Thread and reciever\+Thread are joined

\begin{DoxyReturn}{Returns}
Total particles destroyed 
\end{DoxyReturn}
\Hypertarget{classWorker_a0785107f3e97d649cce7db04fc960868}\label{classWorker_a0785107f3e97d649cce7db04fc960868} 
\index{Worker@{Worker}!probabilityIncreaseVectorSize@{probabilityIncreaseVectorSize}}
\index{probabilityIncreaseVectorSize@{probabilityIncreaseVectorSize}!Worker@{Worker}}
\doxysubsubsection{\texorpdfstring{probabilityIncreaseVectorSize()}{probabilityIncreaseVectorSize()}}
{\footnotesize\ttfamily void Worker\+::probability\+Increase\+Vector\+Size (\begin{DoxyParamCaption}\item[{int}]{generated\+Number }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}



Function used to reduce or expand vector particles. 

This function recieves a generated number and reduces or expands the buffer containing all other particles, its purpose its to simulate particle generation total particles size is increased o decreased as result of the operation


\begin{DoxyParams}{Parameters}
{\em generated\+Number} & Number generated by a distribution indicating the number of particles generated or destroyed \\
\hline
\end{DoxyParams}


\doxysubsection{Member Data Documentation}
\Hypertarget{classWorker_aa3d14370e3b0c1d2535eee6f79d6fbd3}\label{classWorker_aa3d14370e3b0c1d2535eee6f79d6fbd3} 
\index{Worker@{Worker}!buffer@{buffer}}
\index{buffer@{buffer}!Worker@{Worker}}
\doxysubsubsection{\texorpdfstring{buffer}{buffer}}
{\footnotesize\ttfamily vector$<$int$>$\texorpdfstring{$\ast$}{*} Worker\+::buffer\hspace{0.3cm}{\ttfamily [protected]}}



Pointer to particle buffer instatiated as an object of class std\+::vector. 

\Hypertarget{classWorker_ad9a19c5837563d12d4b3e5407d32984e}\label{classWorker_ad9a19c5837563d12d4b3e5407d32984e} 
\index{Worker@{Worker}!counter@{counter}}
\index{counter@{counter}!Worker@{Worker}}
\doxysubsubsection{\texorpdfstring{counter}{counter}}
{\footnotesize\ttfamily int Worker\+::counter\hspace{0.3cm}{\ttfamily [protected]}}



Counter of workstealing events. 



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{WorkerClass_8hpp}{Worker\+Class.\+hpp}}\end{DoxyCompactItemize}
