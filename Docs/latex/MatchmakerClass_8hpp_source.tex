\doxysection{Matchmaker\+Class.\+hpp}
\hypertarget{MatchmakerClass_8hpp_source}{}\label{MatchmakerClass_8hpp_source}\mbox{\hyperlink{MatchmakerClass_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{utils_8hpp}{utils.hpp}}"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}mpi.h"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{Node_8hpp}{Node.hpp}}"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <random>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <cstdlib>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <thread>}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <atomic>}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <cstring>}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <shared\_mutex>}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <mutex>}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <syncstream>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <unistd.h>}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{using\ namespace\ }std;}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classMatchmaker}{Matchmaker}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classNode}{Node}}\{}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00031\ \ \ \ \ \textcolor{keywordtype}{int}\ *\mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}};\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keywordtype}{int}\ *\mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{int}\ *\mbox{\hyperlink{classMatchmaker_ae698ae3f1e531e1a442b6994815bd9b3}{valueArray}};\ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMatchmaker_ac3bde3080d6cf11b6f902b209a836462}{lastVictimRank}};\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00035\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMatchmaker_ad4512bbf669aaac288546043363112d9}{lastTargetRank}};\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{classMatchmaker_a459253acc3e96eee3bdf2146f2bea106}{lowerAverage}};\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMatchmaker_ad15c9e004d5e0d59ba91b2d2991b0cee}{lowerThreshold}};\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ MPI\_Status\ \mbox{\hyperlink{classMatchmaker_af9914b1ee5e39e4be03a87da3365f30c}{waitControlMessages}}(\textcolor{keywordtype}{int}\ *recvFlag)\{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Status\ stat;}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Recv(recvFlag,\ 2,\ MPI\_INT,\ MPI\_ANY\_SOURCE,\ \mbox{\hyperlink{utils_8hpp_ac2558c32fa879d85fe59f8c5f8dfbc04}{UPDATE}},\ MPI\_COMM\_WORLD,\ \&stat);}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ stat;}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMatchmaker_a130a7d388e90a1e4e36fbf4cfd26ee85}{findPossibleVictim}}(\textcolor{keywordtype}{int}\ victim)\{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;i\ <\ \mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};\ i++)\{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[i]\ ==\ \mbox{\hyperlink{utils_8hpp_a6cf4f84ce1249c9fa265b0d6d697faaa}{OVERWORK}}\ \&\&\ i\ !=\ victim)}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ i+\mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}};}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMatchmaker_af37f3f7a4631daca80ba7fb7bf561923}{findPossibleTarget}}(\textcolor{keywordtype}{int}\ target)\{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;i\ <\ \mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};\ i++)\{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[i]\ ==\ \mbox{\hyperlink{utils_8hpp_a9c21a7caee326d7803b94ae1952b27ca}{IDLE}}\ \&\&\ i\ !=\ target)}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ i+\mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}};}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;i\ <\ \mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};\ i++)\{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[i]\ ==\ \mbox{\hyperlink{utils_8hpp_abafd49e7c13337429d6d835b3e8ce080}{UNDERWORK}}\ \&\&\ i\ !=\ target)}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ i+\mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}};}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMatchmaker_a31c01388721ceff6876d0a74e5490f88}{checkActiveProcesses}}()\{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ counter\ =\ 0;}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;i<\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};i++)\{}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMatchmaker_ae698ae3f1e531e1a442b6994815bd9b3}{valueArray}}[i]\ >\ 0\ ||\ \mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[i]\ ==\ \mbox{\hyperlink{utils_8hpp_a00de8f7e0b615f88335573ba3909583d}{LOCKED}})\{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ counter++;}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ counter;}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classMatchmaker_a2cb68818288876d55caf0a9dd2a4b27c}{anyNodeIsLocked}}()\{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i=0;i<\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};i++)\{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[i]\ ==\ \mbox{\hyperlink{utils_8hpp_a00de8f7e0b615f88335573ba3909583d}{LOCKED}})\{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMatchmaker_a0dc41961c3fc9aaaaa7cdc6a7b56c1fe}{updateAverage}}()\{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ localSum\ =\ 0;}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ activeNodes\ =\ 0;}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;i<\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};i++)\{}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ localSum\ +=\ \mbox{\hyperlink{classMatchmaker_ae698ae3f1e531e1a442b6994815bd9b3}{valueArray}}[i];}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Attenzione\ potrebbe\ verificarsi\ una\ race\ condition}}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(localSum\ !=\ 0)}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a459253acc3e96eee3bdf2146f2bea106}{lowerAverage}}\ =\ localSum/\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a459253acc3e96eee3bdf2146f2bea106}{lowerAverage}}\ =\ 1;}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classNode_a56e05c172ac32c53ce36483cb826fcf8}{totalParticles}}\ =\ localSum;}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMatchmaker_a82f68f895ddefa72cc5a7a292bf1b355}{updateValues}}(\textcolor{keywordtype}{int}\ source,\ \textcolor{keywordtype}{int}\ *localFlag)\{}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[source\ -\/\ \mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}}]\ =\ localFlag[1];}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_ae698ae3f1e531e1a442b6994815bd9b3}{valueArray}}[source\ -\/\ \mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}}]\ =\ localFlag[0];}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMatchmaker_a9f7217ec4dac6e5c2418c6f819b42aea}{notifyAverage}}(\textcolor{keywordtype}{int}\ reciever)\{}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Send(\&(this-\/>lowerAverage),\ 1,\ MPI\_FLOAT,\ reciever,\ \mbox{\hyperlink{utils_8hpp_a1f98b8446b6c3c9f699cc2c046c49f87}{AVERAGE}},\ MPI\_COMM\_WORLD);}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMatchmaker_a0c10deeb6942d0067cb45968695d4b84}{notifyThreshold}}()\{}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;i<\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};i++)\{}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Send(\&(this-\/>lowerThreshold),\ 1,\ MPI\_INT,\ \mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i],\ \mbox{\hyperlink{utils_8hpp_a4679d8ea8690999a6c6c7c0cb245c879}{THRESHOLD}},\ MPI\_COMM\_WORLD);}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMatchmaker_a92b2ad780c7cff68deba79da414545a5}{checkForDoubleSteal}}(\textcolor{keywordtype}{int}\ currentVictimRank,\ \textcolor{keywordtype}{int}\ currentTargetRank)\{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}((currentVictimRank\ ==\ \mbox{\hyperlink{classMatchmaker_ac3bde3080d6cf11b6f902b209a836462}{lastVictimRank}}\ \&\&\ currentTargetRank\ ==\ \mbox{\hyperlink{classMatchmaker_ad4512bbf669aaac288546043363112d9}{lastTargetRank}})\ ||\ (currentVictimRank\ ==\ \mbox{\hyperlink{classMatchmaker_ad4512bbf669aaac288546043363112d9}{lastTargetRank}}\ \&\&\ currentTargetRank\ ==\ \mbox{\hyperlink{classMatchmaker_ac3bde3080d6cf11b6f902b209a836462}{lastVictimRank}}))\{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_ad15c9e004d5e0d59ba91b2d2991b0cee}{lowerThreshold}}\ *=\ 2;}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a0c10deeb6942d0067cb45968695d4b84}{notifyThreshold}}();}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_ac3bde3080d6cf11b6f902b209a836462}{lastVictimRank}}\ =\ currentVictimRank;}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_ad4512bbf669aaac288546043363112d9}{lastTargetRank}}\ =\ currentTargetRank;}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMatchmaker_ad32cb881a3493ce7a960bfbb0725df76}{setStealingQuantity}}(\textcolor{keywordtype}{int}\ targetIndex,\ \textcolor{keywordtype}{int}\ victimIndex)\{}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ targetDistance\ =\ abs(\mbox{\hyperlink{classMatchmaker_a459253acc3e96eee3bdf2146f2bea106}{lowerAverage}}\ -\/\ \mbox{\hyperlink{classMatchmaker_ae698ae3f1e531e1a442b6994815bd9b3}{valueArray}}[targetIndex]);}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ victimDistance\ =\ abs(\mbox{\hyperlink{classMatchmaker_a459253acc3e96eee3bdf2146f2bea106}{lowerAverage}}\ -\/\ \mbox{\hyperlink{classMatchmaker_ae698ae3f1e531e1a442b6994815bd9b3}{valueArray}}[victimIndex]);}
\DoxyCodeLine{00210\ }
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ((targetDistance\ +\ victimDistance)/2);}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMatchmaker_a691dbf9e4358c767049b3312a83de708}{printMetrics}}()\{}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}MATCHMAKER\ "{}}\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ \textcolor{stringliteral}{"{}\ DECLARES\ METRICS\ "{}}\ <<\ endl\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)t\ THRESHOLD\ :\ "{}}\ <<\ \mbox{\hyperlink{classMatchmaker_ad15c9e004d5e0d59ba91b2d2991b0cee}{lowerThreshold}}\ <<\ endl\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)t\ AVERAGE\ :\ "{}}\ <<\ \mbox{\hyperlink{classMatchmaker_a459253acc3e96eee3bdf2146f2bea106}{lowerAverage}}\ <<\ endl\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)tTOTAL\ PARTICLES\ :\ "{}}\ <<\ \mbox{\hyperlink{classNode_a56e05c172ac32c53ce36483cb826fcf8}{totalParticles}}\ <<\ endl;}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)t\ VALUES\ :\ "{}}\ <<\ endl;}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;i\ <\ \mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};i++)\{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)t\(\backslash\)tRANK\ :\ "{}}\ <<\ i+\mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}}\ <<\ \textcolor{stringliteral}{"{}\ -\/>\ "{}}\ <<\ \mbox{\hyperlink{classMatchmaker_ae698ae3f1e531e1a442b6994815bd9b3}{valueArray}}[i]\ <<\ \textcolor{stringliteral}{"{}\ -\/-\/\ "{}}\ <<\ \mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[i]\ <<\ endl;}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ endl;}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMatchmaker_a1eb5487f91c5a7e74aa4afcadd1b16b8}{deleteDataFromNode}}(\textcolor{keywordtype}{int}\ stealingQuantity)\{}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}DELETING\ :\ "{}}\ <<\ stealingQuantity\ <<\ \textcolor{stringliteral}{"{}\ FROM\ NODE\ :\ "{}}\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ endl;\ }
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ actualSteal\ =\ \mbox{\hyperlink{classMatchmaker_acc74e44c22ca882d310cb9a527705454}{gatherData}}(stealingQuantity);}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}RANK\ :\ "{}}\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ \textcolor{stringliteral}{"{}\ SENDING\ ALL\ CLEAR\ TO\ PARENT..."{}}\ <<\ endl;}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Send(\&actualSteal,\ 1,\ MPI\_INT,\ \mbox{\hyperlink{classNode_af6f5d2b4b37ba297fa6eebc17542dad4}{parentRank}},\ \mbox{\hyperlink{utils_8hpp_a46fff4184b5d787de1ed367b97cb6091}{COMM}},\ MPI\_COMM\_WORLD);}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}SENT\ :\ "{}}\ <<\ actualSteal\ <<\ \textcolor{stringliteral}{"{}\ PARTICLES\ UPWARDS"{}}\ <<\ endl;}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\mbox{\hyperlink{classMatchmaker_a2cb68818288876d55caf0a9dd2a4b27c}{anyNodeIsLocked}}())\{\}}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classNode_a3e8e2835b7f01ba3b44e57b181a175b8}{declareStatus}}(\mbox{\hyperlink{utils_8hpp_af0591d953a49374b660c9de8964825fe}{UNLOCKED}});}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMatchmaker_adaab737f7915c125f113459673676d68}{injectDataInNode}}(\textcolor{keywordtype}{int}\ stealingQuantity)\{}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}INJECTING\ :\ "{}}\ <<\ stealingQuantity\ <<\ \textcolor{stringliteral}{"{}\ IN\ NODE\ :\ "{}}\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ endl;}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a64a4bf9ea9671163e3da509404a2feb8}{distributeData}}(stealingQuantity);}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}SENT\ DATA\ TO\ LOWER\ NODES"{}}\ <<\ endl;}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\mbox{\hyperlink{classMatchmaker_a2cb68818288876d55caf0a9dd2a4b27c}{anyNodeIsLocked}}())\{\}}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classNode_a3e8e2835b7f01ba3b44e57b181a175b8}{declareStatus}}(\mbox{\hyperlink{utils_8hpp_af0591d953a49374b660c9de8964825fe}{UNLOCKED}});}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMatchmaker_a64a4bf9ea9671163e3da509404a2feb8}{distributeData}}(\textcolor{keywordtype}{int}\ stealingQuantity)\{}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ *stealingArray\ =\ \mbox{\hyperlink{classMatchmaker_ada689998b29b04b679d527790b15a5e3}{calculateStealing}}(stealingQuantity,\ \textcolor{keyword}{true});}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ arrayOffset\ =\ 0;}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ temp\ =\ 0;}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i=0;i<\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};i++)\{}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[i]\ =\ \mbox{\hyperlink{utils_8hpp_a00de8f7e0b615f88335573ba3909583d}{LOCKED}};}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}DISTRIBUTING\ :\ "{}}\ <<\ stealingArray[i]\ <<\ \textcolor{stringliteral}{"{}\ PARTICLES\ TO\ :\ "{}}\ <<\ \mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i]\ <<\ endl;}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Win\_lock(MPI\_LOCK\_EXCLUSIVE,\ \mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i],\ 0,\ \mbox{\hyperlink{classNode_adb103e96748537b115c18c2a2b27a9d9}{inWindow}});}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Put(\mbox{\hyperlink{classNode_a0ec74d1471ab1093e62588cb919bf8ea}{inWindowBuffer}}+arrayOffset,\ stealingArray[i],\ MPI\_INT,\ \mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i],\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}),\ stealingQuantity+i,\ MPI\_INT,\ \mbox{\hyperlink{classNode_adb103e96748537b115c18c2a2b27a9d9}{inWindow}});}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Win\_unlock(\mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i],\ \mbox{\hyperlink{classNode_adb103e96748537b115c18c2a2b27a9d9}{inWindow}});}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ arrayOffset\ +=\ stealingArray[i];}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Send(stealingArray+i,\ 1,\ MPI\_INT,\ \mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i],\ \mbox{\hyperlink{utils_8hpp_a9fec70a17d0bcef23cf03c45a7b7caba}{TARGET}},\ MPI\_COMM\_WORLD);}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classNode_a56e05c172ac32c53ce36483cb826fcf8}{totalParticles}}+=stealingQuantity;}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ stealingArray;}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ *\mbox{\hyperlink{classMatchmaker_ada689998b29b04b679d527790b15a5e3}{calculateStealing}}(\textcolor{keywordtype}{int}\ stealingQuantity,\ \textcolor{keywordtype}{bool}\ evenDistribute\ =\ \textcolor{keyword}{false})\{}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *percentages\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{float}[\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}}];}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ *stealingValues\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{int}[\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}}];}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i=0;i<\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};i++)\{}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!evenDistribute)\{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMatchmaker_ae698ae3f1e531e1a442b6994815bd9b3}{valueArray}}[i]\ !=\ 0)}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ percentages[i]\ =\ ((float)\mbox{\hyperlink{classMatchmaker_ae698ae3f1e531e1a442b6994815bd9b3}{valueArray}}[i]/\mbox{\hyperlink{classNode_a56e05c172ac32c53ce36483cb826fcf8}{totalParticles}});}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ percentages[i]\ =\ 0;}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ percentages[i]\ =\ (float)1/\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stealingValues[i]\ =\ stealingQuantity\ *\ percentages[i];}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!evenDistribute)}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}STEALING\ :\ "{}}\ <<\ stealingValues[i]\ <<\ \textcolor{stringliteral}{"{}\ FROM\ NODE\ :\ "{}}\ <<\ i+\mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}}\ <<\ \textcolor{stringliteral}{"{}\ WITH\ PERCENTAGE\ OF\ :\ "{}}\ <<\ percentages[i]\ <<\ endl;}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}INJECTING\ :\ "{}}\ <<\ stealingValues[i]\ <<\ \textcolor{stringliteral}{"{}\ IN\ NODE\ :\ "{}}\ <<\ i+\mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}}\ <<\ \textcolor{stringliteral}{"{}\ WITH\ PERCENTAGE\ OF\ :\ "{}}\ <<\ percentages[i]\ <<\ endl;}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ percentages;}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ stealingValues;}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMatchmaker_acc74e44c22ca882d310cb9a527705454}{gatherData}}(\textcolor{keywordtype}{int}\ stealingQuantity)\{}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ *stealingArray\ =\ \mbox{\hyperlink{classMatchmaker_ada689998b29b04b679d527790b15a5e3}{calculateStealing}}(stealingQuantity);}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ *tempArray\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{int}[\mbox{\hyperlink{utils_8hpp_a9fa59b79ea6d9d908e2f4e59cba96c9a}{MAX\_STEAL}}];}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ arrayOffset\ =\ 0;}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ completeSteal\ =\ 0;}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ actualSteal\ =\ 0;}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMatchmaker_a2cb68818288876d55caf0a9dd2a4b27c}{anyNodeIsLocked}}())\{}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;i<\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};i++)\{}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[i]\ =\ \mbox{\hyperlink{utils_8hpp_a00de8f7e0b615f88335573ba3909583d}{LOCKED}};}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Send(stealingArray+i,\ 1,\ MPI\_INT,\ \mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i],\ \mbox{\hyperlink{utils_8hpp_a8c72ff488add88e967e15b319b84c481}{VICTIM}},\ MPI\_COMM\_WORLD);}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Recv(\&actualSteal,\ 1,\ MPI\_INT,\ \mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i],\ \mbox{\hyperlink{utils_8hpp_a46fff4184b5d787de1ed367b97cb6091}{COMM}},\ MPI\_COMM\_WORLD,\ MPI\_STATUS\_IGNORE);}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Win\_lock(MPI\_LOCK\_EXCLUSIVE,\ \mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i],\ 0,\ \mbox{\hyperlink{classNode_a187219708add28a69d82fbe647aaf612}{outWindow}});}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Get(\mbox{\hyperlink{classNode_abe556d993e821e964d2158edda89683f}{outWindowBuffer}},\ stealingArray[i],\ MPI\_INT,\ \mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i],\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}),\ stealingQuantity,\ MPI\_INT,\ \mbox{\hyperlink{classNode_a187219708add28a69d82fbe647aaf612}{outWindow}});}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ memcpy(\mbox{\hyperlink{classNode_abe556d993e821e964d2158edda89683f}{outWindowBuffer}}+arrayOffset,\ tempArray,\ actualSteal);}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Win\_unlock(\mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i],\ \mbox{\hyperlink{classNode_a187219708add28a69d82fbe647aaf612}{outWindow}});}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ completeSteal\ +=\ actualSteal;}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}RANK\ :\ "{}}\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ \textcolor{stringliteral}{"{}HAS\ STOLEN\ :\ "{}}\ <<\ completeSteal\ <<\ \textcolor{stringliteral}{"{}\ PARTICLES\ FROM\ HIS\ CHILDS"{}}\ <<\ endl;}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ memcpy(tempArray,\ \mbox{\hyperlink{classNode_abe556d993e821e964d2158edda89683f}{outWindowBuffer}},\ completeSteal);}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ completeSteal;}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00361\ }
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMatchmaker_a36f4239dfe732de00954f07b599b1a1c}{stealFromVictim}}(\textcolor{keywordtype}{int}\ *stealingQuantity,\ \textcolor{keywordtype}{int}\ victimRank)\{}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ actualSteal\ =\ 0;}
\DoxyCodeLine{00374\ }
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[victimRank\ -\/\ \mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}}]\ =\ \mbox{\hyperlink{utils_8hpp_a00de8f7e0b615f88335573ba3909583d}{LOCKED}};}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}NODE\ RANK\ :\ "{}}\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ \textcolor{stringliteral}{"{}\ IS\ STEALING\ FROM\ BRANCH\ WITH\ ROOT\ :\ "{}}\ <<\ victimRank\ <<\ endl;}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Send(stealingQuantity,\ 1,\ MPI\_INT,\ victimRank,\ \mbox{\hyperlink{utils_8hpp_a8c72ff488add88e967e15b319b84c481}{VICTIM}},\ MPI\_COMM\_WORLD);}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Recv(\&actualSteal,\ 1,\ MPI\_INT,\ victimRank,\ \mbox{\hyperlink{utils_8hpp_a46fff4184b5d787de1ed367b97cb6091}{COMM}},\ MPI\_COMM\_WORLD,\ MPI\_STATUS\_IGNORE);}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}NODE\ RANK\ :\ "{}}\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ \textcolor{stringliteral}{"{}\ RECIEVED\ ALL\ CLEAR\ TO\ STEAL\ :\ "{}}\ <<\ actualSteal\ <<\ \textcolor{stringliteral}{"{}\ PARTICLES"{}}\ <<\ endl;}
\DoxyCodeLine{00380\ }
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Win\_lock(MPI\_LOCK\_EXCLUSIVE,\ victimRank,\ 0,\ \mbox{\hyperlink{classNode_a187219708add28a69d82fbe647aaf612}{outWindow}});}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Get(\mbox{\hyperlink{classNode_abe556d993e821e964d2158edda89683f}{outWindowBuffer}},\ actualSteal,\ MPI\_INT,\ victimRank,\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}),\ actualSteal,\ MPI\_INT,\ \mbox{\hyperlink{classNode_a187219708add28a69d82fbe647aaf612}{outWindow}});}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Win\_unlock(victimRank,\ \mbox{\hyperlink{classNode_a187219708add28a69d82fbe647aaf612}{outWindow}});}
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}ROOT\ OF\ STEALING\ HAS\ STOLEN\ :\ "{}}\ <<\ actualSteal\ <<\ \textcolor{stringliteral}{"{}\ PARTICLES"{}}\ <<\ endl;}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ memcpy(\mbox{\hyperlink{classNode_a0ec74d1471ab1093e62588cb919bf8ea}{inWindowBuffer}},\ \mbox{\hyperlink{classNode_abe556d993e821e964d2158edda89683f}{outWindowBuffer}},\ actualSteal);}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ actualSteal;}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00389\ }
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMatchmaker_a23ac0ed2927e896c51d4204a99234d88}{sendToTarget}}(\textcolor{keywordtype}{int}\ *stealingQuantity,\ \textcolor{keywordtype}{int}\ targetRank)\{}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(*stealingQuantity\ ==\ 0)\{}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}WILL\ NOT\ SEND\ DATA\ TO\ TARGET"{}}\ <<\ endl;}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00403\ }
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[targetRank\ -\/\ \mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}}]\ =\ \mbox{\hyperlink{utils_8hpp_a00de8f7e0b615f88335573ba3909583d}{LOCKED}};}
\DoxyCodeLine{00405\ }
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Win\_lock(MPI\_LOCK\_EXCLUSIVE,\ targetRank,\ 0,\ \mbox{\hyperlink{classNode_adb103e96748537b115c18c2a2b27a9d9}{inWindow}});}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Put(\mbox{\hyperlink{classNode_a0ec74d1471ab1093e62588cb919bf8ea}{inWindowBuffer}},\ *stealingQuantity,\ MPI\_INT,\ targetRank,\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}),\ *stealingQuantity,\ MPI\_INT,\ \mbox{\hyperlink{classNode_adb103e96748537b115c18c2a2b27a9d9}{inWindow}});}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Win\_unlock(targetRank,\ \mbox{\hyperlink{classNode_adb103e96748537b115c18c2a2b27a9d9}{inWindow}});}
\DoxyCodeLine{00409\ }
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Send(stealingQuantity,\ 1,\ MPI\_INT,\ targetRank,\ \mbox{\hyperlink{utils_8hpp_a9fec70a17d0bcef23cf03c45a7b7caba}{TARGET}},\ MPI\_COMM\_WORLD);}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMatchmaker_a6e87c91133a790f192a658d15ccbb39b}{checkTermination}}()\{}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classNode_a95b7033e5e44fd68c8952a10af367d92}{done}};}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ thread\ \mbox{\hyperlink{classMatchmaker_a978de2aa3d7a25e132419885c8674836}{activateStatusThread}}()\{}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ thread(\&\mbox{\hyperlink{classNode_a48511c73b8d4174af4405f14fc7bb37a}{Node::sendStatusFunction}},\ \textcolor{keyword}{this});}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ thread\ \mbox{\hyperlink{classMatchmaker_a3b6053d81de9fa4b2701d7f19632b878}{activateRecieverThread}}()\{}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ thread(\&\mbox{\hyperlink{classNode_a452fc104fe4726da9630696fe769832f}{Node::recieveMessageFromMatchmaker}},\ \textcolor{keyword}{this});}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMatchmaker_a49a3a4566356faf89c68709572864f76}{endingProcedure}}()\{}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}RANK\ :\ "{}}\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ \textcolor{stringliteral}{"{}\ HAS\ ENDED\ COMPUTATION...\ "{}}\ <<\ endl;}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00450\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classMatchmaker_aa04768d11858ccbdc64f429714cd69e6}{matchmakerMainLoop}}(\textcolor{keywordtype}{int}\ *\ globalResult)\{}
\DoxyCodeLine{00461\ }
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ *localFlag\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{int}[2];\ \ \ \ \ \ \ \ \textcolor{comment}{//Conterrà\ il\ valore\ della\ media\ locale\ del\ singolo\ nodo}}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ MPI\_Status\ stat;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Status\ della\ richiesta,\ ogni\ comunicazione\ con\ un\ nodo\ viene\ salvata\ qui\ in\ modo\ da\ poter\ accedere\ all}}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//info\ di\ quello\ specifico\ nodo,\ regola\ chi\ ha\ mandato\ la\ richiesta\ e\ l'aggiornamento\ del\ suo\ status}}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ idlePenalty\ =\ \mbox{\hyperlink{classMatchmaker_ad15c9e004d5e0d59ba91b2d2991b0cee}{lowerThreshold}}\ /\ 2;}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ stealingCounter\ =\ 0;}
\DoxyCodeLine{00467\ }
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ thread\ statusThread;}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \ \ \ \ thread\ recieverThread;}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ !=\ 0)\{}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ statusThread\ =\ \mbox{\hyperlink{classMatchmaker_a978de2aa3d7a25e132419885c8674836}{activateStatusThread}}();}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ recieverThread\ =\ \mbox{\hyperlink{classMatchmaker_a3b6053d81de9fa4b2701d7f19632b878}{activateRecieverThread}}();}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00475\ }
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\textcolor{keyword}{true})\{}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMatchmaker_a6e87c91133a790f192a658d15ccbb39b}{checkTermination}}())}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00479\ }
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMatchmaker_a31c01388721ceff6876d0a74e5490f88}{checkActiveProcesses}}()\ >\ 0)\{}
\DoxyCodeLine{00481\ }
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a691dbf9e4358c767049b3312a83de708}{printMetrics}}();}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stat\ =\ \mbox{\hyperlink{classMatchmaker_af9914b1ee5e39e4be03a87da3365f30c}{waitControlMessages}}(localFlag);}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(localFlag[1]\ ==\ \mbox{\hyperlink{utils_8hpp_a00de8f7e0b615f88335573ba3909583d}{LOCKED}})\{}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[stat.MPI\_SOURCE\ -\/\ \mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}}]\ =\ \mbox{\hyperlink{utils_8hpp_a00de8f7e0b615f88335573ba3909583d}{LOCKED}};}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}NODE\ RANK\ :\ "{}}\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ \textcolor{stringliteral}{"{}RECIEVES\ MESSAGE\ FROM\ :\ "{}}\ <<\ stat.MPI\_SOURCE\ <<\ \textcolor{stringliteral}{"{}\ OF\ LOCKING"{}}\ <<\ endl;}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00491\ }
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(localFlag[1]\ ==\ \mbox{\hyperlink{utils_8hpp_a6cf4f84ce1249c9fa265b0d6d697faaa}{OVERWORK}}\ \&\&\ \mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[stat.MPI\_SOURCE-\/\mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}}]\ !=\ \mbox{\hyperlink{utils_8hpp_a00de8f7e0b615f88335573ba3909583d}{LOCKED}})\{}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ \textcolor{stringliteral}{"{}\ CORE\ :\ "{}}\ <<\ stat.MPI\_SOURCE\ <<\ \textcolor{stringliteral}{"{}\ IS\ OVERWORKED\ WITH\ :\ "{}}\ <<\ localFlag[0]\ <<\ \textcolor{stringliteral}{"{}\ PARTICLES"{}}\ <<\ endl;}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a82f68f895ddefa72cc5a7a292bf1b355}{updateValues}}(stat.MPI\_SOURCE,\ localFlag);}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a0dc41961c3fc9aaaaa7cdc6a7b56c1fe}{updateAverage}}();}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a9f7217ec4dac6e5c2418c6f819b42aea}{notifyAverage}}(stat.MPI\_SOURCE);}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ target\ =\ \mbox{\hyperlink{classMatchmaker_af37f3f7a4631daca80ba7fb7bf561923}{findPossibleTarget}}(stat.MPI\_SOURCE\ -\/\ \mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}});}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(target\ !=\ -\/1)\{}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stealingCounter++;}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//Entrambi\ meno\ uno\ perche\ si\ converte\ da\ rank\ a\ indice\ del\ vettore\ dei\ valori}}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ quantity\ =\ \mbox{\hyperlink{classMatchmaker_ad32cb881a3493ce7a960bfbb0725df76}{setStealingQuantity}}(target\ -\/\ \mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}},\ stat.MPI\_SOURCE\ -\/\ \mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}});}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}CORE\ :\ "{}}\ <<\ stat.MPI\_SOURCE\ <<\ \textcolor{stringliteral}{"{}\ SHOULD\ LET\ "{}}\ <<\ quantity\ <<\ \textcolor{stringliteral}{"{}\ OBJECTS\ BE\ STOLEN\ BY\ :\ "{}}\ <<\ target\ <<\ endl;}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ actualStolen\ =\ \mbox{\hyperlink{classMatchmaker_a36f4239dfe732de00954f07b599b1a1c}{stealFromVictim}}(\&quantity,\ stat.MPI\_SOURCE);}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}ACTUAL\ STOLEN\ :\ "{}}\ <<\ actualStolen\ <<\ endl;}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a23ac0ed2927e896c51d4204a99234d88}{sendToTarget}}(\&actualStolen,\ target);}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//checkForDoubleSteal(stat.MPI\_SOURCE,\ target);}}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00514\ }
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(localFlag[1]\ ==\ \mbox{\hyperlink{utils_8hpp_aa8290939dc02192ebf7028e5b45b0ff9}{STABLE}}\ \&\&\ \mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[stat.MPI\_SOURCE-\/\mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}}]\ !=\ \mbox{\hyperlink{utils_8hpp_a00de8f7e0b615f88335573ba3909583d}{LOCKED}})\{}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}CORE\ :\ "{}}\ <<\ stat.MPI\_SOURCE\ <<\ \textcolor{stringliteral}{"{}\ IS\ STABLE\ WITH\ "{}}\ <<\ localFlag[0]\ <<\ \textcolor{stringliteral}{"{}\ PARTICLES"{}}\ <<\ endl;}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a82f68f895ddefa72cc5a7a292bf1b355}{updateValues}}(stat.MPI\_SOURCE,\ localFlag);}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a0dc41961c3fc9aaaaa7cdc6a7b56c1fe}{updateAverage}}();}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a9f7217ec4dac6e5c2418c6f819b42aea}{notifyAverage}}(stat.MPI\_SOURCE);}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00522\ }
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(localFlag[1]\ ==\ \mbox{\hyperlink{utils_8hpp_abafd49e7c13337429d6d835b3e8ce080}{UNDERWORK}}\ \&\&\ \mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[stat.MPI\_SOURCE\ -\/\ \mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}}]\ !=\ \mbox{\hyperlink{utils_8hpp_a00de8f7e0b615f88335573ba3909583d}{LOCKED}})\{}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}CORE\ :\ "{}}\ <<\ stat.MPI\_SOURCE\ <<\ \textcolor{stringliteral}{"{}\ IS\ UNDERWORKED\ WITH\ "{}}\ <<\ localFlag[0]\ <<\ \textcolor{stringliteral}{"{}\ PARTICLES"{}}\ <<\ endl;}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a82f68f895ddefa72cc5a7a292bf1b355}{updateValues}}(stat.MPI\_SOURCE,\ localFlag);}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a0dc41961c3fc9aaaaa7cdc6a7b56c1fe}{updateAverage}}();}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a9f7217ec4dac6e5c2418c6f819b42aea}{notifyAverage}}(stat.MPI\_SOURCE);}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ victim\ =\ \mbox{\hyperlink{classMatchmaker_a130a7d388e90a1e4e36fbf4cfd26ee85}{findPossibleVictim}}(stat.MPI\_SOURCE\ -\/\ \mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}});}
\DoxyCodeLine{00530\ }
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(victim\ !=\ -\/1)\{}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stealingCounter++;}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ quantity\ =\ \mbox{\hyperlink{classMatchmaker_ad32cb881a3493ce7a960bfbb0725df76}{setStealingQuantity}}(stat.MPI\_SOURCE-\/\mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}},\ victim-\/\mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}});}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}CORE\ :\ "{}}\ <<\ stat.MPI\_SOURCE\ <<\ \textcolor{stringliteral}{"{}\ SHOULD\ STEAL\ FROM\ "{}}\ <<\ victim\ <<\ \textcolor{stringliteral}{"{}\ "{}}\ <<\ quantity\ <<\ \textcolor{stringliteral}{"{}\ OBJECTS"{}}\ <<\ endl;}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ actualStolen\ =\ \mbox{\hyperlink{classMatchmaker_a36f4239dfe732de00954f07b599b1a1c}{stealFromVictim}}(\&quantity,\ victim);}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}ACTUAL\ STOLEN\ :\ "{}}\ <<\ actualStolen\ <<\ \textcolor{stringliteral}{"{}\ FROM\ RANK\ :\ "{}}\ <<\ victim\ <<\ endl;}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a23ac0ed2927e896c51d4204a99234d88}{sendToTarget}}(\&actualStolen,\ stat.MPI\_SOURCE);}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//checkForDoubleSteal(victim,\ stat.MPI\_SOURCE);}}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00544\ }
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(localFlag[1]\ ==\ \mbox{\hyperlink{utils_8hpp_a9c21a7caee326d7803b94ae1952b27ca}{IDLE}}\ \&\&\ \mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[stat.MPI\_SOURCE-\/\mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}}]\ !=\ \mbox{\hyperlink{utils_8hpp_a00de8f7e0b615f88335573ba3909583d}{LOCKED}})\{}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}CORE\ :\ "{}}\ <<\ stat.MPI\_SOURCE\ <<\ \textcolor{stringliteral}{"{}\ IS\ IDLE\ WITH\ :\ "{}}\ <<\ localFlag[0]\ <<\ \textcolor{stringliteral}{"{}\ PARTICLES"{}}\ <<\ endl;}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a82f68f895ddefa72cc5a7a292bf1b355}{updateValues}}(stat.MPI\_SOURCE,\ localFlag);}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMatchmaker_ad15c9e004d5e0d59ba91b2d2991b0cee}{lowerThreshold}}/2\ >\ \mbox{\hyperlink{utils_8hpp_aa3c9d5bc3f1c3dfec69046200aecb29a}{MIN\_THRESHOLD}})\{}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_ad15c9e004d5e0d59ba91b2d2991b0cee}{lowerThreshold}}\ =\ \mbox{\hyperlink{classMatchmaker_ad15c9e004d5e0d59ba91b2d2991b0cee}{lowerThreshold}}/2;}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a0c10deeb6942d0067cb45968695d4b84}{notifyThreshold}}();}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00555\ }
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}TRESHOLD\ DECREASES\ TO\ :\ "{}}\ <<\ \mbox{\hyperlink{classMatchmaker_ad15c9e004d5e0d59ba91b2d2991b0cee}{lowerThreshold}}\ <<\ endl;}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a0dc41961c3fc9aaaaa7cdc6a7b56c1fe}{updateAverage}}();}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}A\ WORKER\ HAS\ GONE\ IDLE!\ NOTIFY\ AVERAGE\ TO\ ALL\ WORKERS\ "{}}\ <<\ endl;}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;i<\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};i++)\{}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}SENDING\ AVERAGE\ OF\ :\ "{}}\ <<\ \mbox{\hyperlink{classMatchmaker_a459253acc3e96eee3bdf2146f2bea106}{lowerAverage}}\ <<\ \textcolor{stringliteral}{"{}\ TO\ :\ "{}}\ <<\ \mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i]\ <<\ endl;}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a9f7217ec4dac6e5c2418c6f819b42aea}{notifyAverage}}(\mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i]);}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00566\ }
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ victim\ =\ \mbox{\hyperlink{classMatchmaker_a130a7d388e90a1e4e36fbf4cfd26ee85}{findPossibleVictim}}(stat.MPI\_SOURCE\ -\/\ \mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}});}
\DoxyCodeLine{00568\ }
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(victim\ !=\ -\/1)\{}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stealingCounter++;}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ quantity\ =\ \mbox{\hyperlink{classMatchmaker_ad32cb881a3493ce7a960bfbb0725df76}{setStealingQuantity}}(stat.MPI\_SOURCE-\/\mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}},\ victim-\/\mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}});}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}CORE\ :\ "{}}\ <<\ stat.MPI\_SOURCE\ <<\ \textcolor{stringliteral}{"{}\ SHOULD\ IMMEDIATLY\ STEAL\ FROM\ "{}}\ <<\ victim\ <<\ \textcolor{stringliteral}{"{}\ "{}}\ <<\ quantity\ <<\ \textcolor{stringliteral}{"{}\ OBJECTS"{}}\ <<\ endl;}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ actualStolen\ =\ \mbox{\hyperlink{classMatchmaker_a36f4239dfe732de00954f07b599b1a1c}{stealFromVictim}}(\&quantity,\ victim);}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}ACTUAL\ STOLEN\ :\ "{}}\ <<\ actualStolen\ <<\ \textcolor{stringliteral}{"{}\ FROM\ RANK\ :\ "{}}\ <<\ victim\ <<\ endl;}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a23ac0ed2927e896c51d4204a99234d88}{sendToTarget}}(\&actualStolen,\ stat.MPI\_SOURCE);}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//checkForDoubleSteal(victim,\ stat.MPI\_SOURCE);}}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00581\ }
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(localFlag[1]\ ==\ \mbox{\hyperlink{utils_8hpp_af0591d953a49374b660c9de8964825fe}{UNLOCKED}})\{}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}-\/-\/-\/-\/-\/-\/-\/CORE\ :\ "{}}\ <<\ stat.MPI\_SOURCE\ <<\ \textcolor{stringliteral}{"{}\ IS\ NOW\ AVAILABLE\ FOR\ STEALING\ "{}}\ <<\ endl;}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a82f68f895ddefa72cc5a7a292bf1b355}{updateValues}}(stat.MPI\_SOURCE,\ localFlag);}
\DoxyCodeLine{00586\ }
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;i<\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};i++)\{}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[i]\ !=\ \mbox{\hyperlink{utils_8hpp_a00de8f7e0b615f88335573ba3909583d}{LOCKED}})\{}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a0dc41961c3fc9aaaaa7cdc6a7b56c1fe}{updateAverage}}();}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a9f7217ec4dac6e5c2418c6f819b42aea}{notifyAverage}}(stat.MPI\_SOURCE);}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \ \ \ \ \ \ }
\DoxyCodeLine{00596\ }
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a691dbf9e4358c767049b3312a83de708}{printMetrics}}();}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}MATCHMAKER\ WITH\ RANK\ :\ "{}}\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ \textcolor{stringliteral}{"{}\ INITIATING\ ENDING\ PROCEDURES..."{}}\ <<\ endl;}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a459253acc3e96eee3bdf2146f2bea106}{lowerAverage}}\ =\ 0;}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;i<\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};\ i++)\{}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8cpp_a73d711c2ea70f5243f68a2ecb7aa3698}{calculate\_time}}();}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}SENDING\ TO\ :\ "{}}\ <<\ \mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i]\ <<\ endl;}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a9f7217ec4dac6e5c2418c6f819b42aea}{notifyAverage}}(\mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[i]);}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00607\ }
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a49a3a4566356faf89c68709572864f76}{endingProcedure}}();}
\DoxyCodeLine{00609\ }
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ !=\ 0)\{}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}-\/-\/-\/-\/STATUS\ :\ "{}}\ <<\ statusThread.joinable()\ <<\ \textcolor{stringliteral}{"{}\ IN\ RANK\ :\ "{}}\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ endl;}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}-\/-\/-\/RECIEVER\ :\ "{}}\ <<\ recieverThread.joinable()\ <<\ \textcolor{stringliteral}{"{}\ IN\ RANK\ :\ "{}}\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ endl;}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00614\ }
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ !=\ 0)\{}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ statusThread.join();}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ recieverThread.join();}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00619\ }
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}[]\ localFlag;}
\DoxyCodeLine{00621\ }
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \ \ \ \ cout\ <<\ \textcolor{stringliteral}{"{}RANK\ :\ "{}}\ <<\ \mbox{\hyperlink{classNode_a17aa93a6a65de6390afdeccf54538e3f}{nodeRank}}\ <<\ \textcolor{stringliteral}{"{}\ ENDED\ MAIN\ LOOP"{}}\ <<\ endl;}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00624\ }
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a31e43eacbec0cd8032c04afb26eb5435}{Matchmaker}}(\textcolor{keywordtype}{int}\ \mbox{\hyperlink{classNode_af6f5d2b4b37ba297fa6eebc17542dad4}{parentRank}},\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classNode_a57eaf1618c1bf6e9efdb1679c7c88f4b}{chunkSize}},\ \textcolor{keywordtype}{int}\ *\mbox{\hyperlink{classNode_aec1b644887e939fba2f43ff628ecd7eb}{recvBuffer}},\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classNode_a56e05c172ac32c53ce36483cb826fcf8}{totalParticles}},\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{classNode_a3152534caf4db66c422fccd375473e1e}{localAverage}},\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classNode_a42508a8dadd837a7936ab40b4de38d53}{localThreshold}},}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}},\ \textcolor{keywordtype}{int}\ *\mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}})\ :\ \mbox{\hyperlink{classNode}{Node}}(\mbox{\hyperlink{classNode_af6f5d2b4b37ba297fa6eebc17542dad4}{parentRank}},\ \mbox{\hyperlink{classNode_a57eaf1618c1bf6e9efdb1679c7c88f4b}{chunkSize}},\ \mbox{\hyperlink{classNode_aec1b644887e939fba2f43ff628ecd7eb}{recvBuffer}},\ \mbox{\hyperlink{classNode_a56e05c172ac32c53ce36483cb826fcf8}{totalParticles}},}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classNode_a3152534caf4db66c422fccd375473e1e}{localAverage}},\ \mbox{\hyperlink{classNode_a42508a8dadd837a7936ab40b4de38d53}{localThreshold}})\ \{}
\DoxyCodeLine{00650\ }
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>childNumber\ =\ \mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>childRanks\ =\ \mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}};}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>tagArray\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{int}[\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}}];}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>valueArray\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{int}[\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}}];}
\DoxyCodeLine{00655\ }
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;i<\ \mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};i++)\{}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}}[i]\ =\ \mbox{\hyperlink{utils_8hpp_aa8290939dc02192ebf7028e5b45b0ff9}{STABLE}};}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_ae698ae3f1e531e1a442b6994815bd9b3}{valueArray}}[i]\ =\ \mbox{\hyperlink{classNode_a56e05c172ac32c53ce36483cb826fcf8}{totalParticles}}/\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00660\ }
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_ac3bde3080d6cf11b6f902b209a836462}{lastVictimRank}}\ =\ -\/1;}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_ad4512bbf669aaac288546043363112d9}{lastTargetRank}}\ =\ -\/1;}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a3b4fd71a833ff0ddd031ae9101281fb5}{offset}}\ =\ \mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}}[0];}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_a459253acc3e96eee3bdf2146f2bea106}{lowerAverage}}\ =\ \mbox{\hyperlink{classNode_a56e05c172ac32c53ce36483cb826fcf8}{totalParticles}}/\mbox{\hyperlink{classMatchmaker_ac04df1c7928487fb03549a95ea5fbdde}{childNumber}};}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classMatchmaker_ad15c9e004d5e0d59ba91b2d2991b0cee}{lowerThreshold}}\ =\ (\mbox{\hyperlink{classMatchmaker_a459253acc3e96eee3bdf2146f2bea106}{lowerAverage}}\ *\ 25)/100;}
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00667\ }
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classMatchmaker_a037ac2765012704d3860f4d2f7e32c92}{\string~Matchmaker}}()\{}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ []\mbox{\hyperlink{classMatchmaker_a2d07a7c412fb92f23f2b0f69efbb286f}{childRanks}};}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ []\mbox{\hyperlink{classMatchmaker_a625ea9bbc12d495154525548f04c811b}{tagArray}};}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ []\mbox{\hyperlink{classMatchmaker_ae698ae3f1e531e1a442b6994815bd9b3}{valueArray}};}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ []childFlag;}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00681\ \};}

\end{DoxyCode}
